// 📁 telegramCommands.js

module.exports = function registerTelegramCommands(bot) {
  const getRandom = (arr) => arr[Math.floor(Math.random() * arr.length)];
  const nameOf = (ctx) => ctx.from?.first_name || "חבר";

  // 📌 רישום כל Slash Commands שיופיעו ב־BotFather
  bot.api.setMyCommands([
    { command: "start", description: "התחלה וברוך הבא" },
    { command: "help", description: "הצג את כל האפשרויות של הבוט" },
    { command: "prophecy", description: "קבל תחזית פסימית מהבוט" },
    { command: "laugh", description: "שמעון יורד עליך" },
    { command: "compliment", description: "מחמאה גסה במיוחד" },
    { command: "nextmvp", description: "ניחוש מגוחך של שמעון" },
    { command: "why", description: "למה אני כזה גרוע?" },
    { command: "shimon", description: "משפט השראה מרושע" },
    { command: "excuse", description: "תירוץ מביך להפסד שלך" },
    { command: "rage", description: "התפרצות זעם של גיימר מתוסכל" },
    { command: "daily", description: "משפט יומי אכזרי משמעון" }
  ]);

  const replies = {
    prophecy: [
      "היום אתה תמות בגולאג תוך 17 שניות.",
      "הפינג שלך יעלה ל־999 ברגע הקריטי.",
      "תתחבר – וכולם יתנתקו.",
      "הגורל שלך כתוב: Spectator Mode.",
      "הנבואה: Rage quit תוך 6 דקות."
    ],
    laugh: [
      "נפל כמו טונה בלי שמן.",
      "תמחוק את המשחק ותחזור לתיכון.",
      "גם בוטים ב־Easy היו עושים יותר.",
      "MVP של התבוסה, כל הכבוד.",
      "RIP גאווה גיימרית."
    ],
    compliment: [
      "רועי – למרות שאתה רוסי עם שם תימני, אני גאה בך. קצת.",
      "יוגב – אתה לא MVP, אבל לפחות אתה בא לערוצים.",
      "מתן – לא הכי טוב, אבל בטוח לא הכי גרוע. אולי.",
      "שמעון – אתה אלוף. ברור, זה אני כותב את זה."
    ],
    nextmvp: [
      "יוגב, כי הוא היחיד שבא.",
      "גילי – בזכות AFK.",
      "אביחי. בטעות.",
      "אם מתן לא יירדם – אולי הוא.",
      "פשוט תנו לי את הכתר."
    ],
    why: [
      "כי אתה משחק כמו סבתא בלי משקפיים.",
      "זה לא אתה. זו הדינמיקה הקבוצתית (סתם, זה אתה).",
      "כי אתה לא חבר ב־FIFO רשמית.",
      "כי אתה נעלם תמיד ברגעים החשובים.",
      "כי אתה מת בתפריט של הנשק."
    ],
    shimon: [
      "לא כל מי שמחובר – מחובר באמת.",
      "תשתוק ותתחבר – אולי תשתפר.",
      "אם לא היית כזה גרוע, אולי היית MVP.",
      "שמעון רואה הכל. אפילו את ה־AFK שלך.",
      "תשקול לפרוש או לפחות לשתוק."
    ],
    excuse: [
      "האינטרנט נפל, נשבע.",
      "הכלב דרך לי על המקלדת.",
      "העכבר נתקע, באמת.",
      "אני משחק עם יד אחת כרגע.",
      "הייתי באמצע לאכול בורקס."
    ],
    rage: [
      "מה זה החרא הזה?! איך זה פגע בי?!",
      "אין מצב! שקר של המערכת!",
      "אני פורש מהמשחק הזה לנצח!",
      "מי יצר את המפה הזאת?! עיוור?!",
      "לא שיחקתי ככה מאז שנות ה־2000!"
    ],
    daily: [
      "📆 יום ראשון – אין רחמים, רק הפסדים.",
      "📆 יום שני – קמים בשביל להפסיד.",
      "📆 יום שלישי – שוב אף אחד לא בערוץ.",
      "📆 יום חמישי – אולי תתחבר היום?",
      "📆 שבת – רק שחקנים עם כבוד נשארו."
    ]
  };

  // רישום הפקודות בפועל
  for (const command in replies) {
    bot.command(command, (ctx) =>
      ctx.reply(`🤖 ${getRandom(replies[command])}`)
    );
  }

  // ✅ פקודת /help תגובה מותאמת אישית
  bot.command("help", async (ctx) => {
    await ctx.reply(`📋 שמעון יודע לעשות את הדברים הבאים:

/prophecy – קבל תחזית פסימית מהבוט  
/laugh – שמעון יורד עליך  
/compliment – מחמאה גסה במיוחד  
/nextmvp – ניחוש מגוחך של שמעון  
/why – למה אני כזה גרוע?  
/shimon – משפט השראה מרושע  
/excuse – תירוץ מביך להפסד שלך  
/rage – התפרצות זעם של גיימר מתוסכל  
/daily – משפט יומי אכזרי משמעון`);
  });
};
