module.exports = function registerTelegramCommands(bot) {
  const getRandom = (arr) => arr[Math.floor(Math.random() * arr.length)];
  const nameOf = (ctx) => ctx.from?.first_name || "חבר";

  // 🔁 רישום Slash Commands בלייב
  bot.api.setMyCommands([
    { command: "start", description: "התחלה וברוך הבא" },
    { command: "help", description: "הצג את כל האפשרויות של הבוט" },
    { command: "prophecy", description: "קבל תחזית פסימית מהבוט" },
    { command: "laugh", description: "שמעון יורד עליך" },
    { command: "compliment", description: "מחמאה גסה במיוחד" },
    { command: "nextmvp", description: "ניחוש מגוחך של שמעון" },
    { command: "why", description: "למה אני כזה גרוע?" },
    { command: "shimon", description: "משפט השראה מרושע" },
    { command: "excuse", description: "תירוץ מביך להפסד שלך" },
    { command: "rage", description: "התפרצות זעם של גיימר מתוסכל" },
    { command: "daily", description: "משפט יומי אכזרי משמעון" }
  ]);

  const replies = {
    prophecy: [
      "היום אתה תמות בגולאג תוך 17 שניות.",
      "הפינג שלך יעלה ל־999 ברגע הקריטי.",
      "תתחבר – וכולם יתנתקו.",
      "הגורל שלך כתוב: Spectator Mode.",
      "אתה תעשה 0 קילים ותצעק כאילו ניצחת.",
      "המיקרופון שלך ייתקע ותאשים את דיסקורד.",
      "תבקש revive, וכולם יתעלמו.",
      "המערכת תעניש אותך על AFK תמידי.",
      "הגורל קובע – גולדי יחטוף ממך שוב.",
      "הנבואה: Rage quit תוך 6 דקות."
    ],
    laugh: [
      "נפל כמו טונה בלי שמן.",
      "תמחוק את המשחק ותחזור לתיכון.",
      "תחפש קבוצה של גיל 8 ומטה.",
      "גם בוטים ב־Easy היו עושים יותר.",
      "MVP של התבוסה, כל הכבוד.",
      "שיחקת עם היד השנייה?",
      "זו לא הייתה ירייה – זו הייתה גניחה.",
      "עז של פיפואים, לא יותר.",
      "מי לימד אותך לשחק, נטפליקס?",
      "RIP גאווה גיימרית."
    ],
    compliment: [
      "רועי – למרות שאתה רוסי עם שם תימני, אני גאה בך. קצת.",
      "יוגב – אתה לא MVP, אבל לפחות אתה בא לערוצים.",
      "מתן – לא הכי טוב, אבל בטוח לא הכי גרוע. אולי.",
      "שרון – הקונטרול שלך טוב כמו הגז שלך באירועים.",
      "עמרי – יותר מדבר מאשר יורה, אבל אוהבים.",
      "אביחי – אם תפסיק להתנתק, תפתיע את כולנו.",
      "גילי – אתה תותח, רק תזכור לשחק גם.",
      "קלימרו – יום אחד תנצח. אולי כשנעבור משחק.",
      "שמעון – אתה אלוף. ברור, זה אני כותב את זה.",
      "מי שלא בא לערוץ – גם אתם בסדר, תורידו ממים."
    ],
    nextmvp: [
      "יוגב, כי הוא היחיד שבא.",
      "גילי – בזכות AFK.",
      "אביחי. בטעות.",
      "שמעון. כי נמאס לי מכולם.",
      "שרון – כי אין אף אחד אחר.",
      "אם מתן לא יירדם – אולי הוא.",
      "אולי אתה. או שלא.",
      "אף אחד. כולם אפסים.",
      "פשוט תנו לי את הכתר.",
      "MVP? זו מילה גדולה מדי בשביל הערב הזה."
    ],
    why: [
      "כי אתה משחק כמו סבתא בלי משקפיים.",
      "זה לא אתה. זו הדינמיקה הקבוצתית (סתם, זה אתה).",
      "כי אתה לא חבר ב־FIFO רשמית.",
      "כי אתה נעלם תמיד ברגעים החשובים.",
      "כי אתה צופה ביוטיוב במקום לשחק.",
      "כי המיקרופון שלך מדבר יותר טוב ממך.",
      "כי אתה מת בתפריט של הנשק.",
      "כי שמעון לא בחר בך. וזה אומר הכל."
    ],
    shimon: [
      "לא כל מי שמחובר – מחובר באמת.",
      "תשתוק ותתחבר – אולי תשתפר.",
      "אם לא היית כזה גרוע, אולי היית MVP.",
      "שמעון רואה הכל. אפילו את ה־AFK שלך.",
      "שחק כמו גבר, לא כמו כפתור F.",
      "הבושה מתחילה כשאתה נכנס לערוץ.",
      "כשהקבוצה מפסידה – כנראה אתה שם.",
      "תשקול לפרוש או לפחות לשתוק.",
      "כל מי שצועק, לא בהכרח יורה.",
      "שמעון תמיד איתך – במיוחד כשאתה נופל."
    ],
    excuse: [
      "האינטרנט נפל, נשבע.",
      "הכלב דרך לי על המקלדת.",
      "העכבר נתקע, באמת.",
      "היה לי לאג של החיים.",
      "המסך שלי נכבה לרגע.",
      "אני משחק עם יד אחת כרגע.",
      "הכיסא שלי שבור, לא נוח.",
      "הייתי באמצע לאכול בורקס.",
      "לא שומעים אותי? כי אני צועק.",
      "היה טלפון בדיוק, אחי."
    ],
    rage: [
      "מה זה החרא הזה?! איך זה פגע בי?!",
      "אין מצב! שקר של המערכת!",
      "שוב אותו באג דפוק!",
      "אני פורש מהמשחק הזה לנצח!",
      "מי יצר את המפה הזאת?! עיוור?!",
      "שמעון, תוציא אותי מהקבוצה!",
      "אם אני מת שוב – שובר שלט!",
      "למה תמיד אני הקורבן?!",
      "הקבוצה לא שווה אותי.",
      "לא שיחקתי ככה מאז שנות ה־2000!"
    ],
    daily: [
      "📆 יום ראשון – אין רחמים, רק הפסדים.",
      "📆 יום שני – קמים בשביל להפסיד.",
      "📆 יום שלישי – שוב אף אחד לא בערוץ.",
      "📆 יום רביעי – פינג גבוה, מצב רוח נמוך.",
      "📆 יום חמישי – אולי תתחבר היום?",
      "📆 שישי – כולם מתחבאים מה־MVP.",
      "📆 שבת – רק שחקנים עם כבוד נשארו.",
      "📆 יום של חופש = יום בלי ניצחונות.",
      "📆 שמעון במצב AFK – תסתדרו לבד.",
      "📆 היום זה לא היום שלך. אבל נסה שוב."
    ]
  };

  // רישום כל הפקודות
  for (const command in replies) {
    bot.command(command, (ctx) =>
      ctx.reply(`🤖 ${getRandom(replies[command])}`)
    );
  }

  // start ו־help נפרדות
  bot.command("start", async (ctx) => {
    const name = nameOf(ctx);
    await ctx.reply(`שלום ${name}, שמעון מחובר. שלח /help כדי לראות מה אתה מסוגל בכלל.`);
  });

  bot.command("help", async (ctx) => {
    await ctx.reply(`📋 שמעון יודע לעשות את הדברים הבאים:

/prophecy – קבל תחזית פסימית מהבוט  
/laugh – שמעון יורד עליך  
/compliment – מחמאה גסה במיוחד  
/nextmvp – ניחוש מגוחך של שמעון  
/why – למה אני כזה גרוע?  
/shimon – משפט השראה מרושע  
/excuse – תירוץ מביך להפסד שלך  
/rage – התפרצות זעם של גיימר מתוסכל  
/daily – משפט יומי אכזרי משמעון`);
  });
};
